# ✅ 项目检查清单

使用此清单确保你的食堂列车应用配置正确。

## 📦 安装检查

- [ ] Node.js 18+ 已安装
  ```bash
  node --version  # 应该显示 v18.x.x 或更高
  ```

- [ ] 依赖已安装
  ```bash
  npm install  # 无错误完成
  ```

- [ ] 开发服务器可以启动
  ```bash
  npm run dev  # 应该在 http://localhost:3000 运行
  ```

## 🗄️ Supabase 配置检查

- [ ] Supabase 项目已创建
  - 访问 https://supabase.com/dashboard

- [ ] SQL 脚本已执行
  - [ ] `restaurants` 表存在
  - [ ] `user_profiles` 表存在
  - [ ] RLS 策略已启用
  - [ ] `restaurant-images` bucket 已创建

- [ ] 环境变量已配置
  - [ ] `.env.local` 文件已创建
  - [ ] `NEXT_PUBLIC_SUPABASE_URL` 已设置
  - [ ] `NEXT_PUBLIC_SUPABASE_ANON_KEY` 已设置

验证命令：
```bash
# 检查环境变量是否加载
cat .env.local
```

- [ ] 认证已配置
  - [ ] Email 认证已启用
  - [ ] 重定向 URL 已配置（部署后）

## 🧪 功能测试清单

### 认证功能
- [ ] 可以访问注册页面 (/signup)
- [ ] 可以创建新账号
- [ ] 收到注册成功提示
- [ ] 自动跳转到首页
- [ ] 可以退出登录
- [ ] 可以重新登录
- [ ] 未登录时自动重定向到登录页

### 餐厅管理
- [ ] 可以访问添加餐厅页面
- [ ] 可以填写餐厅表单
- [ ] 所有必填字段验证正常
- [ ] 可以成功保存餐厅
- [ ] 餐厅显示在首页列表
- [ ] 可以查看餐厅详情
- [ ] 可以编辑自己添加的餐厅
- [ ] 可以删除自己添加的餐厅
- [ ] 无法编辑其他人的餐厅

### 照片上传
- [ ] 可以选择图片文件
- [ ] 图片预览正常显示
- [ ] 图片上传无错误
- [ ] 上传的图片在餐厅卡片显示
- [ ] 图片在详情页正常显示
- [ ] 支持的格式：JPG, PNG

### 筛选功能
- [ ] 可以打开筛选面板
- [ ] 可以输入菜系类型
- [ ] 可以选择价格范围
- [ ] 可以输入距离
- [ ] 点击"应用"后结果正确过滤
- [ ] 可以清除筛选条件
- [ ] 筛选条件计数正确显示

### 随机选择
- [ ] 可以打开随机选择弹窗
- [ ] 显示可选餐厅数量
- [ ] 点击"开始抽取"显示动画
- [ ] 随机结果正确显示
- [ ] 可以"再抽一次"
- [ ] 可以"查看详情"跳转正确
- [ ] 支持筛选后随机选择

## 📱 响应式测试

- [ ] 手机端 (< 640px)
  - [ ] 布局正常
  - [ ] 按钮可点击
  - [ ] 表单可填写

- [ ] 平板端 (640px - 1024px)
  - [ ] 2 列布局显示正常
  - [ ] 导航栏布局正确

- [ ] 桌面端 (> 1024px)
  - [ ] 3 列布局显示正常
  - [ ] 所有功能正常

## 🚀 部署前检查

- [ ] 代码已推送到 GitHub
  ```bash
  git status  # 应该显示 "nothing to commit"
  ```

- [ ] 构建命令无错误
  ```bash
  npm run build  # 应该成功完成
  ```

- [ ] 无 TypeScript 错误
- [ ] 无 ESLint 错误
- [ ] 所有测试通过

## 🌐 部署检查 (Vercel)

- [ ] 项目已导入到 Vercel
- [ ] 环境变量已添加
  - [ ] `NEXT_PUBLIC_SUPABASE_URL`
  - [ ] `NEXT_PUBLIC_SUPABASE_ANON_KEY`
- [ ] 构建成功
- [ ] 部署成功
- [ ] 可以访问生产 URL
- [ ] Supabase 重定向 URL 已更新

## 🔐 安全检查

- [ ] `.env.local` 在 .gitignore 中
- [ ] 没有硬编码的密钥
- [ ] RLS 策略已启用
- [ ] Storage policies 已配置
- [ ] 仅创建者可编辑/删除

## 📊 性能检查

- [ ] 首页加载时间 < 3 秒
- [ ] 图片正常加载
- [ ] 无控制台错误
- [ ] 无 404 错误

## 🐛 常见问题排查

### 数据库连接失败
- [ ] 检查 Supabase URL 是否正确
- [ ] 检查 Anon Key 是否正确
- [ ] 检查 Supabase 项目是否暂停

### 认证失败
- [ ] 检查 Email 认证是否启用
- [ ] 检查重定向 URL 配置
- [ ] 清除浏览器缓存

### 图片上传失败
- [ ] 检查 Storage bucket 是否存在
- [ ] 检查 Storage policies
- [ ] 检查图片文件大小（< 5MB）

### 无法查看其他用户的餐厅
- [ ] 检查 RLS 策略
- [ ] 确认 `created_by` 字段正确

## 📝 部署后验证

在生产环境进行以下测试：

- [ ] 注册新用户
- [ ] 添加餐厅
- [ ] 上传照片
- [ ] 使用筛选
- [ ] 随机选择
- [ ] 编辑餐厅
- [ ] 删除餐厅
- [ ] 退出登录
- [ ] 重新登录

## 🎉 完成！

如果所有项目都已勾选，恭喜！你的食堂列车应用已经完全可用了。

## 🆘 需要帮助？

如果遇到问题：
1. 查看 [SETUP.md](SETUP.md)
2. 查看 [DEPLOYMENT.md](DEPLOYMENT.md)
3. 查看 [PROJECT_SUMMARY.md](PROJECT_SUMMARY.md)
4. 检查 Supabase 和 Vercel 的日志

---

**提示**: 将此清单保存为参考，在每次部署新功能后重新测试。

